<?xml version="1.0" encoding="UTF-8"?>
<formulasValidacionCalculo version="05200607"><campo numero="31"><formula validacion="//campo[@numero='31'] = 'O' or //campo[@numero='31']='S' " fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique campo 31, si la declaración es sustitutiva debe llenar el casillero 104" condicionFormulaCalculo="1=1"/></campo><campo numero="99"><formula validacion="string-length(//campo[@numero='99']) &lt;= 15" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique dimencion del campo 99, 15 digitos" condicionFormulaCalculo="1=1"/></campo><campo numero="101"><formula validacion="//campo[@numero='101'] &gt;= 1 and //campo[@numero='101'] &lt;= 12" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique, mes fiscal no debe superar al actual" condicionFormulaCalculo="1=1"/></campo><campo numero="104"><formula validacion="(//campo[@numero='31']='S' and string-length(//campo[@numero='104'])&gt;0) or (//campo[@numero='31']='O' and string-length(//campo[@numero='104'])=0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Casillero 104 es válido únicamente para declaraciones sutitutivas" condicionFormulaCalculo="1=1"/><formula validacion="string-length(//campo[@numero='104']) &lt;=15" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Declaración sustitutiva debe contener Impuesto, Anticipo o Retención a pagar" condicionFormulaCalculo="1=1"/></campo><campo numero="202"><formula validacion="string-length(//campo[@numero='202']) &gt;0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Campo obligatorio" condicionFormulaCalculo="1=1"/></campo><campo numero="301"><formula validacion="//campo[@numero='301'] = '3011' or //campo[@numero='301']='3021' or //campo[@numero='301']='3031' or //campo[@numero='301']='3041' or //campo[@numero='301']='3051' or //campo[@numero='301']='3071' or //campo[@numero='301']='3081' or //campo[@numero='301']='3091' " fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ADVERTENCIA" mensajeError="Error en campo 302, verificar código ICE 'Opción corregir'" condicionFormulaCalculo="1=1"/></campo><campo numero="303"><formula validacion="(//campo[@numero='303']&gt;0 and //campo[@numero='399']&gt;0) or (//campo[@numero='303']=0 and //campo[@numero='399']&lt;=0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="20010531" tipoFormula="V" severidad="ERROR" mensajeError="Verifique datos campo 303, Si registra ICE a Pagar debe registrar Base Imponible" condicionFormulaCalculo="1=1"/></campo><campo numero="399"><formula validacion="round (//campo[@numero='399'] * 100) = round (sum(//campo[@numero='303']) * 5.15)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="20010531" tipoFormula="V" severidad="ERROR" mensajeError="Error, verifique el valor del ICE a Pagar, no concuerda con tarifa vigente para el período fiscal" condicionFormulaCalculo="1=1"/><formula validacion="round (//campo[@numero='399'] * 100) = round (sum(//campo[@numero='303']) * 5.15)" fechaVigenciaDesde="20010601" fechaVigenciaHasta="20040731" tipoFormula="V" severidad="ERROR" mensajeError="Error, verifique el valor del ICE a Pagar, no concuerda con tarifa vigente para el período fiscal" condicionFormulaCalculo="1=1"/><formula validacion="round (//campo[@numero='399'] * 100) = round (sum(//campo[@numero='303']) * 5.15)" fechaVigenciaDesde="20040801" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Error, verifique el valor del ICE a Pagar, no concuerda con tarifa vigente para el período fiscal" condicionFormulaCalculo="1=1"/><formula validacion="round (sum(//campo[@numero='303']) * 5.15)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="20010531" tipoFormula="C" severidad="ERROR" mensajeError="Error, verifique el valor del ICE a Pagar, no concuerda con tarifa vigente para el período fiscal" condicionFormulaCalculo="1=1"/><formula validacion="round (sum(//campo[@numero='303']) * 5.15)" fechaVigenciaDesde="20040801" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Error, verifique el valor del ICE a Pagar, no concuerda con tarifa vigente para el período fiscal" condicionFormulaCalculo="1=1"/><formula validacion="round (sum(//campo[@numero='303']) * 5.15)" fechaVigenciaDesde="20010601" fechaVigenciaHasta="20040731" tipoFormula="C" severidad="ERROR" mensajeError="Error, verifique el valor del ICE a Pagar, no concuerda con tarifa vigente para el período fiscal" condicionFormulaCalculo="1=1"/></campo><campo numero="901"><formula validacion="(sum(//campo[@numero='901']) &gt;= 0) and (sum(//campo[@numero='901']) &lt;= sum(//campo[@numero='399']))" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="No puede ingresar valores en el campo 901 cuando la declaración es Original" condicionFormulaCalculo="1=1"/><formula validacion="(sum(//campo[@numero='901']) &gt;= 0 and //campo[@numero='31'] = 'S') or (sum(//campo[@numero='901'])=0 and //campo[@numero='31'] = 'O')" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Erro campo 901, pago previo no puede se mayor que Total Impuesto a pagar" condicionFormulaCalculo="1=1"/></campo><campo numero="902"><formula validacion="//campo[@numero='902'] &gt;= 0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="El total de impuesto a pagar no puede ser negativo" condicionFormulaCalculo="1=1"/><formula validacion="((round (//campo[@numero='902'] * 100) = round((//campo[@numero='399'] - sum(//campo[@numero='901'])) * 100)) and ((//campo[@numero='399'] - sum(//campo[@numero='901'])) &gt;= 0)) or (//campo[@numero='902'] = 0 and (//campo[@numero='399'] - sum(//campo[@numero='901'])) &lt; 0 )" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Operación Incorrecta, campo 902 'Opción corregir'" condicionFormulaCalculo="1=1"/><formula validacion="round( (//campo[@numero='399'] - sum(//campo[@numero='901'])) * 100)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Operación Incorrecta, campo 902 'Opción corregir'" condicionFormulaCalculo="(//campo[@numero='399'] - sum(//campo[@numero='901'])) &gt;= 0"/><formula validacion="0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Operación Incorrecta, campo 902 'Opción corregir'" condicionFormulaCalculo="(//campo[@numero='399'] - sum(//campo[@numero='901'])) &lt; 0"/></campo><campo numero="905"><formula validacion="round (//campo[@numero='905'] * 100) = round( (//campo[@numero='999'] - sum(//campo[@numero='907']) ) * 100)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Error campo 905, formas de pago no coincide con total pagado 'Opción corregir'" condicionFormulaCalculo="1=1"/><formula validacion="round( (//campo[@numero='999'] - sum(//campo[@numero='907'])) * 100)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Error campo 905, formas de pago no coincide con total pagado 'Opción corregir'" condicionFormulaCalculo="(sum(//campo[@numero='999']) - sum(//campo[@numero='907']) ) &gt;=0"/><formula validacion="0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Error campo 905, formas de pago no coincide con total pagado 'Opción corregir'" condicionFormulaCalculo="(sum(//campo[@numero='999']) - sum(//campo[@numero='907'])) &lt;0"/></campo><campo numero="907"><formula validacion="round (//campo[@numero='907'] * 100) = round( (//campo[@numero='999'] - sum(//campo[@numero='905']))*100) or string-length(//campo[@numero='907'])=0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique 999 = 905 + 907" condicionFormulaCalculo="1=1"/><formula validacion="round (//campo[@numero='907'] * 100) = round ( (sum(//campo[@numero='909']) +sum(//campo[@numero='911']) + sum(//campo[@numero='913']) + sum(//campo[@numero='915'])) * 100 ) or string-length(//campo[@numero='907'])=0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Error campo 907, verificar notas de crédito 'Opción corregir'" condicionFormulaCalculo="1=1"/><formula validacion="round ( (sum(//campo[@numero='909']) +sum(//campo[@numero='911']) + sum(//campo[@numero='913']) + sum(//campo[@numero='915'])) * 100 )" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Error campo 907, verificar notas de crédito 'Opción corregir'" condicionFormulaCalculo="1=1"/></campo><campo numero="908"><formula validacion="(string-length(//campo[@numero='908']) &gt; 0) and (sum(//campo[@numero='909']) &gt; 0) or (string-length(//campo[@numero='908']) = 0) and (sum(//campo[@numero='909']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="908:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="910"><formula validacion="(string-length(//campo[@numero='910']) &gt; 0) and (sum(//campo[@numero='911']) &gt; 0) or (string-length(//campo[@numero='910']) = 0) and (sum(//campo[@numero='911']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="910:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="912"><formula validacion="(string-length(//campo[@numero='912']) &gt; 0) and (sum(//campo[@numero='913']) &gt; 0) or (string-length(//campo[@numero='912']) = 0) and (sum(//campo[@numero='913']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="912:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="914"><formula validacion="(string-length(//campo[@numero='914']) &gt; 0) and (sum(//campo[@numero='915']) &gt; 0) or (string-length(//campo[@numero='914']) = 0) and (sum(//campo[@numero='915']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="914:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="999"><formula validacion="((sum(//campo[@numero='104'])!=0) and (//campo[@numero='999']!=0)) or string-length(//campo[@numero='104']) = 0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="No puede presentar una declaración sustitutiva si no tiene un valor a pagar (campo 999)" condicionFormulaCalculo="1=1"/><formula validacion="((round (//campo[@numero='999'] * 100) = round ( ( //campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904'])) * 100)) and (( //campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904'])) &gt;=0)) or ((//campo[@numero='999'] = 0) and (( //campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904'])) &lt;0))" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Operación incorrecta, campo 999 'Opción corregir'" condicionFormulaCalculo="1=1"/><formula validacion="sum(//campo[@numero='999'])&gt;=0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Los campos de valor a pagar, interes, multas e impuesto no deben tener valores negativos." condicionFormulaCalculo="1=1"/><formula validacion="round ( ( //campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904'])) * 100)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Operación incorrecta, campo 999 'Opción corregir'" condicionFormulaCalculo="( //campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904'])) &gt;=0"/><formula validacion="0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="C" severidad="ERROR" mensajeError="Operación incorrecta, campo 999 'Opción corregir'" condicionFormulaCalculo="( //campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904'])) &lt; 0"/></campo></formulasValidacionCalculo>
