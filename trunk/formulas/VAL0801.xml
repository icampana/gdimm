<?xml version="1.0" encoding="UTF-8"?>
<formulasValidacionCalculo version="08200201"><campo numero="31"><formula validacion="//campo[@numero='31'] = 'O' or //campo[@numero='31']='S' " fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Operación incorrecta - verique sumatoria de los campos 352 al 381" condicionFormulaCalculo="1=1"/></campo><campo numero="101"><formula validacion="//campo[@numero='101'] &gt;= 1 and //campo[@numero='101'] &lt;= 12" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="101: Valor en Mes, no valido" condicionFormulaCalculo="1=1"/></campo><campo numero="104"><formula validacion="string-length(//campo[@numero='104']) &lt;=15" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique el No. de formulario de Declaracion Original" condicionFormulaCalculo="1=1"/><formula validacion="(//campo[@numero='31']='S' and string-length(//campo[@numero='104'])&gt;0) or (//campo[@numero='31']='O' and string-length(//campo[@numero='104'])=0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Casillero 104 es válido únicamente para declaraciones sutitutivas" condicionFormulaCalculo="1=1"/></campo><campo numero="201"><formula validacion="//campo[@numero='201'] = //ruc" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="El campo 201 debe ser igual al RUC" condicionFormulaCalculo="1=1"/></campo><campo numero="399"><formula validacion="round (//campo[@numero='399'] * 100) = round ( (sum(//campo[@numero='331']) + sum(//campo[@numero='332']) + sum(//campo[@numero='333']) + sum(//campo[@numero='334']) + sum(//campo[@numero='335']) + sum(//campo[@numero='336']) + sum(//campo[@numero='337']) + sum(//campo[@numero='338']) ) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="399: SUBTOTAL Sumar 331 al 338" condicionFormulaCalculo="1=1"/><formula validacion="round ( (sum(//campo[@numero='331']) + sum(//campo[@numero='332']) + sum(//campo[@numero='333']) + sum(//campo[@numero='334']) + sum(//campo[@numero='335']) + sum(//campo[@numero='336']) + sum(//campo[@numero='337']) + sum(//campo[@numero='338']) ) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="1=1"/></campo><campo numero="497"><formula validacion="(round (//campo[@numero='498'] * 100) = round(sum(//campo[@numero='332']) * 40) and //campo[@numero='497'] = 0) or (round (//campo[@numero='497'] * 100) = round(sum(//campo[@numero='332']) * 60) and //campo[@numero='498'] = 0)" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ADVERTENCIA" mensajeError="Verificar porcentaje por deduccion, campo 497." condicionFormulaCalculo="1=1"/><formula validacion="( sum(//campo[@numero='497']) != 0 and sum(//campo[@numero='498']) = 0 and sum(//campo[@numero='332']) &gt; 0 ) or ( sum(//campo[@numero='497']) = 0 and sum(//campo[@numero='498']) != 0 and sum(//campo[@numero='332']) &gt; 0) or ( sum(//campo[@numero='497']) = 0 and sum(//campo[@numero='498']) = 0 and sum(//campo[@numero='332']) = 0)" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ADVERTENCIA" mensajeError="Verificar porcentaje por deduccion, campo 497 (2)." condicionFormulaCalculo="1=1"/></campo><campo numero="498"><formula validacion="(round (//campo[@numero='497'] * 100) = round(sum(//campo[@numero='332']) * 60) and //campo[@numero='498'] = 0) or (round (//campo[@numero='498'] * 100) = round(sum(//campo[@numero='332']) * 40) and //campo[@numero='497'] = 0)" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ADVERTENCIA" mensajeError="Verificar porcentaje por deduccion, campo 498." condicionFormulaCalculo="1=1"/><formula validacion="( sum(//campo[@numero='497']) != 0 and sum(//campo[@numero='498']) = 0 and sum(//campo[@numero='332']) &gt; 0 ) or ( sum(//campo[@numero='497']) = 0 and sum(//campo[@numero='498']) != 0 and sum(//campo[@numero='332']) &gt; 0) or ( sum(//campo[@numero='497']) = 0 and sum(//campo[@numero='498']) = 0 and sum(//campo[@numero='332']) = 0)" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ADVERTENCIA" mensajeError="Verificar porcentaje por deduccion, campo 498 (2)." condicionFormulaCalculo="1=1"/></campo><campo numero="499"><formula validacion="round (//campo[@numero='499'] * 100) = round ( (sum(//campo[@numero='421']) + sum(//campo[@numero='422']) + sum(//campo[@numero='423']) + sum(//campo[@numero='424']) + sum(//campo[@numero='425']) ) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="499: SUBTOTAL Sumar 421 al 425" condicionFormulaCalculo="1=1"/><formula validacion="round ( (sum(//campo[@numero='421']) + sum(//campo[@numero='422']) + sum(//campo[@numero='423']) + sum(//campo[@numero='424']) + sum(//campo[@numero='425']) ) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="1=1"/></campo><campo numero="801"><formula validacion="( round (//campo[@numero='801'] * 100) = round ((sum(//campo[@numero='399']) - sum(//campo[@numero='499']) - sum(//campo[@numero='497']) - sum(//campo[@numero='498'])) * 100) ) or ( //campo[@numero='801'] = 0 and ((sum(//campo[@numero='399']) - sum(//campo[@numero='499']) - sum(//campo[@numero='497']) - sum(//campo[@numero='498'])) &lt; 0 ))" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Operacion incorrecta, campo 801: Cuota o porcion liquidada." condicionFormulaCalculo="1=1"/><formula validacion="0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="(sum(//campo[@numero='399']) - sum(//campo[@numero='499']) - sum(//campo[@numero='497']) - sum(//campo[@numero='498'])) &lt; 0"/><formula validacion="round ( (sum(//campo[@numero='399']) - sum(//campo[@numero='499']) - sum(//campo[@numero='497']) - sum(//campo[@numero='498'])) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="(sum(//campo[@numero='399']) - sum(//campo[@numero='499']) - sum(//campo[@numero='497']) - sum(//campo[@numero='498'])) &gt;= 0"/></campo><campo numero="803"><formula validacion="( round (//campo[@numero='803'] * 100) = round ((//campo[@numero='801'] - sum(//campo[@numero='802'])) * 100)) or ( //campo[@numero='803'] = 0 and (//campo[@numero='801'] - sum(//campo[@numero='802'])) &lt; 0 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Operacion incorrecta, campo 803: Base imponible." condicionFormulaCalculo="1=1"/><formula validacion="0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="(//campo[@numero='801'] - sum(//campo[@numero='802'])) &lt; 0"/><formula validacion="round ( (//campo[@numero='801'] - sum(//campo[@numero='802']) ) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="(//campo[@numero='801'] - sum(//campo[@numero='802'])) &gt;= 0"/></campo><campo numero="901"><formula validacion="(sum(//campo[@numero='901']) &gt;= 0) and (sum(//campo[@numero='901']) &lt;= sum(//campo[@numero='899']))" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Pago previo no puede ser mayor que el Impuesto a pagar" condicionFormulaCalculo="1=1"/><formula validacion="(sum(//campo[@numero='901']) &gt;= 0 and //campo[@numero='31'] = 'S') or (sum(//campo[@numero='901'])=0 and //campo[@numero='31'] = 'O')" fechaVigenciaDesde="20020101" fechaVigenciaHasta="20040331" tipoFormula="V" severidad="ERROR" mensajeError="901: Campo 901 debe ser mayor o igual a cero y sustitutiva" condicionFormulaCalculo="1=1"/></campo><campo numero="902"><formula validacion="( round (//campo[@numero='902'] * 100) = round ((//campo[@numero='899'] - sum(//campo[@numero='901'])) * 100) ) or ( //campo[@numero='902'] = 0 and (//campo[@numero='899'] - sum(//campo[@numero='901'])) &lt; 0 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Operacion incorrecta, campo 902: Total impuesto a pagar." condicionFormulaCalculo="1=1"/><formula validacion="//campo[@numero='902'] &gt;= 0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Campo 902 debe ser mayor o igual a cero" condicionFormulaCalculo="1=1"/><formula validacion="round ( (//campo[@numero='899'] - sum(//campo[@numero='901']) ) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="(//campo[@numero='899'] - sum(//campo[@numero='901'])) &gt;= 0"/><formula validacion="0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="(//campo[@numero='899'] - sum(//campo[@numero='901'])) &lt; 0"/></campo><campo numero="903"><formula validacion="//campo[@numero='903'] &gt;= 0 or string-length(//campo[@numero='903'])=0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Campo 903 debe ser mayor o igual a cero" condicionFormulaCalculo="1=1"/></campo><campo numero="904"><formula validacion="//campo[@numero='904'] &gt;= 0 or string-length(//campo[@numero='904'])=0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Campo 904 debe ser mayor o igual a cero" condicionFormulaCalculo="1=1"/></campo><campo numero="905"><formula validacion="round (//campo[@numero='905'] * 100) = round( (//campo[@numero='999'] - sum(//campo[@numero='907'])) * 100)" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique 905 = 999 - 907" condicionFormulaCalculo="1=1"/><formula validacion="//campo[@numero='905'] &gt;= 0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Campo 905 debe ser mayor o igual a cero" condicionFormulaCalculo="1=1"/></campo><campo numero="907"><formula validacion="round (//campo[@numero='907'] * 100) = round( (//campo[@numero='999'] - //campo[@numero='905']) * 100) or string-length(//campo[@numero='907'])=0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Verifique 907 = 999 - 905" condicionFormulaCalculo="1=1"/><formula validacion="//campo[@numero='907'] &gt;= 0 or string-length(//campo[@numero='907'])=0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="Campo 907 debe ser mayor o igual a cero" condicionFormulaCalculo="1=1"/><formula validacion="round (//campo[@numero='907'] * 100) = round ( (sum(//campo[@numero='909']) +sum(//campo[@numero='911']) + sum(//campo[@numero='913']) + sum(//campo[@numero='915'])) * 100 ) or string-length(//campo[@numero='907'])=0" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="907: Total Notas de Credito: 909 + 911 + 913 + 915" condicionFormulaCalculo="1=1"/><formula validacion="round ( (sum(//campo[@numero='909']) +sum(//campo[@numero='911']) + sum(//campo[@numero='913']) + sum(//campo[@numero='915'])) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="1=1"/></campo><campo numero="908"><formula validacion="(string-length(//campo[@numero='908']) &gt; 0) and (sum(//campo[@numero='909']) &gt; 0) or (string-length(//campo[@numero='908']) = 0) and (sum(//campo[@numero='909']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="908:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="910"><formula validacion="(string-length(//campo[@numero='910']) &gt; 0) and (sum(//campo[@numero='911']) &gt; 0) or (string-length(//campo[@numero='910']) = 0) and (sum(//campo[@numero='911']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="910:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="912"><formula validacion="(string-length(//campo[@numero='912']) &gt; 0) and (sum(//campo[@numero='913']) &gt; 0) or (string-length(//campo[@numero='912']) = 0) and (sum(//campo[@numero='913']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="912:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="914"><formula validacion="(string-length(//campo[@numero='914']) &gt; 0) and (sum(//campo[@numero='915']) &gt; 0) or (string-length(//campo[@numero='914']) = 0) and (sum(//campo[@numero='915']) = 0)" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="914:Verifique el numero de Nota de Credito" condicionFormulaCalculo="1=1"/></campo><campo numero="999"><formula validacion="((sum(//campo[@numero='104'])!=0) and (//campo[@numero='999']!=0)) or string-length(//campo[@numero='104']) = 0" fechaVigenciaDesde="19990101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="No puede presentar una declaración sustitutiva si no tiene un valor a pagar (campo 999)" condicionFormulaCalculo="1=1"/><formula validacion="round (//campo[@numero='999'] * 100) = round( (//campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904']) ) * 100) " fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="999: Error en Total Pagado 902 + 903 + 904" condicionFormulaCalculo="1=1"/><formula validacion="round (//campo[@numero='999'] * 100) = round ( (sum(//campo[@numero='905']) + sum(//campo[@numero='907'])) * 100 )" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="V" severidad="ERROR" mensajeError="999: Error en Total Pagado, verifique formas de pago" condicionFormulaCalculo="1=1"/><formula validacion="round( (//campo[@numero='902'] + sum(//campo[@numero='903']) + sum(//campo[@numero='904']) ) * 100)" fechaVigenciaDesde="20020101" fechaVigenciaHasta="" tipoFormula="C" severidad="ADVERTENCIA" mensajeError="{0}: el valor ingresado ({1}) no corresponde con el valor calculado por el sistema ({2}). " condicionFormulaCalculo="1=1"/></campo></formulasValidacionCalculo>
